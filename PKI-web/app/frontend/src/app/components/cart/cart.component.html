<app-header-and-menu></app-header-and-menu>

<div class="container card" *ngIf="loggedInUser; else loginTemplate">
  <h2 class="card-header">Moja korpa</h2>
  
    <table class="table table-bordered" *ngIf="cart?.length; else emptyCart">
      <thead>
        <tr>
          <th>Naziv događaja</th>
          <th>Datum</th>
          <th>Broj gostiju</th>
          <th>Cena</th>
          <th>Akcije</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let event of cart">
          <td>{{ event.eventOfferId?.name }}</td>
          <td>{{ event.date | date:'dd.MM.yyyy' }}</td>
          <td>{{ event.numberOfPeople }}</td>
          <td>{{ event.eventOfferId?.price }} €</td>
          <td class="text-center">
            <button class="btn btn-danger btn-sm"
                    (click)="removeFromCart(event.eventId!)">
              <i class="bi bi-trash"></i>
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  
    <!-- Dugme Zakaži ispod tabele -->
    <div *ngIf="cart?.length" class="mt-3 text-end">
      <button class="btn btn-success" (click)="confirmCart()">
        <i class="bi bi-calendar-check"></i> Zakaži
      </button>
    </div>
  
    <ng-template #emptyCart>
      <p class="text-muted">Korpa je prazna.</p>
    </ng-template>  
</div>

<ng-template #loginTemplate>
  <p class="error-message">Molimo prijavite se da vidite korpu.</p>
</ng-template>
