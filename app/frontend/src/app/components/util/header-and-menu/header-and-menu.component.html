<header class="d-flex justify-content-between align-items-center">
    <div>
        <h4 class="m-0">Trenuci za pamćenje</h4>
        <h5>Programiranje Korisničkih Interfejsa</h5>
    </div>

    <div class="navbar-container d-flex align-items-center" id="navbarMenu">
        <div class="d-none d-lg-flex me-3">
            <span class="d-flex align-items-center">
                <ng-container *ngFor="let item of navItems">
                  <a *ngIf="item.visible(user, logged)" class="nav-link" [routerLink]="item.route">
                    <img class="nav-icon" [src]="'../../../../assets/' + item.icon" [alt]="item.label" />
                    {{ item.label }}
                  </a>
                </ng-container>
              </span>
        </div>

        <button class="btn btn-primary-blue d-lg-none dropdown-toggle" type="button" id="menuButton" data-bs-toggle="dropdown" aria-expanded="false" *ngIf="logged"></button>

        <ul class="dropdown-menu collapse" id="menuDropdown">
            <li *ngFor="let item of navItems">
                <a *ngIf="item.visible(user, logged)" [routerLink]="item.route" class="dropdown-item">
                    <img class="nav-icon" [src]="'../../../../assets/' + item.icon" [alt]="item.label" />
                    {{ item.label }}
                </a>
            </li>
        </ul>

        <div class="dropdownSlika">
            <!-- "user.photoId==null ? '../../../../assets/Profile picture icon.png' : user.photoId.file" -->
            <img [src]="'../../../../assets/Profile picture icon.png'"         
            alt="Profile picture" class="profile-image" id="profileDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="profileDropdown">
                <li>
                    <div class="theme-toggle">
                        <span class ="dropdown-label">Tema</span>
                        <label class="switch" id="theme_switch">
                            <input type="checkbox" [checked]="currentThemeDark" (change)="toggleTheme()"/>
                            <span class="slider"></span>
                        </label>
                    </div>
                </li>
                <li *ngIf="logged">
                    <a class="dropdown-item" routerLink="/profile"><img class="nav-icon" src="../../../../assets/Profile Icon.png">Pregled profila</a>
                </li>
                <li *ngIf="logged && user.userTypeId.userTypeId == 2">
                    <a class="dropdown-item" routerLink="/cart">
                        <img class="nav-icon" src="../../../../assets/Cart Icon.png">
                        Korpa
                        <span class="badge bg-secondary ms-1" *ngIf="user?.cartCount">{{ user.cartCount }}</span>
                    </a>
                </li>
                
                <li *ngIf="logged && user.userTypeId.userTypeId == 2">
                    <a class="dropdown-item" routerLink="/notifications">
                        <img class="nav-icon" src="../../../../assets/Administration Information Overview Icon.png">
                        Obaveštenja
                        <span class="badge bg-danger ms-1" *ngIf="user?.unreadNotificationCount">{{ user.unreadNotificationCount }}</span>
                    </a>
                </li>
                  
                <li class="dropdown-divider"></li>
                <li *ngIf="logged">
                    <a class="dropdown-item" (click)="logout()"><img class="nav-icon" src="../../../../assets/Log out Icon.png">Odjavi se</a>
                </li>
                <li *ngIf="!logged">
                    <a class="dropdown-item" routerLink="/login"><img class="nav-icon" src="../../../../assets/Log in Icon.png">Prijavi se</a>
                </li>
            </ul>
        </div>
    </div>
</header>
